import{Aa as _,Ga as D,Hb as ot,I as f,Ia as Y,J as q,Ja as Z,K as L,L as m,La as O,M as P,Ma as T,N as p,Na as N,O as X,Q as $,Ra as B,X as x,a as I,da as S,db as J,fa as u,g as d,j as V,k as j,n as W,nb as M,o as z,p as K,q as Q,qb as tt,ra as v,sb as et,ta as b,ya as H,za as U}from"./chunk-4STL355D.js";var h=new L("NGE_MONACO_CONFIG");var A=new L("NGE_MONACO_CONTRIBUTION");var it="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0";var C=window,g=(()=>{let i=class i{constructor(t,e,o){this.config=t,this.contributions=e,this.resourceLoader=o,this.monaco$=new V,this.baseUrl=it,this.contributions=e||[]}ngOnDestroy(){return d(this,null,function*(){yield this.deactivateContributions()})}onLoadMonaco(t){return typeof C.monaco>"u"?this.monaco$.asObservable().subscribe(t):W(C.monaco).subscribe(t)}loadAsync(){var t;return(t=this.loadPromise)!=null?t:this.loadPromise=new Promise(e=>d(this,null,function*(){let o=setInterval(()=>{document.readyState==="complete"&&(clearInterval(o),setTimeout(()=>d(this,null,function*(){var n;yield this.resourceLoader.waitForPendings(),this.baseUrl=((n=this.config)==null?void 0:n.assets)||it,this.baseUrl.endsWith("/")&&(this.baseUrl=this.baseUrl.slice(0,this.baseUrl.length-1)),this.addWorkersIfCrossDomain(),C.require?this.onLoad(e):z(this.resourceLoader.loadAllAsync([["script",`${this.baseUrl}/min/vs/loader.js`]])).then(()=>this.onLoad(e))}),300))})}))}onLoad(t){var o;C.require.config({paths:{vs:this.baseUrl+"/min/vs"}});let e=((o=this.config)==null?void 0:o.locale)||"";e!=="en"&&C.require.config({"vs/nls":{availableLanguages:{"*":e}}}),C.require(["vs/editor/editor.main"],()=>d(this,null,function*(){yield this.activateContributions(),this.monaco$.next(monaco),t(monaco)}))}addWorkersIfCrossDomain(){if(this.baseUrl.startsWith("http")){let t=URL.createObjectURL(new Blob([`
                self.MonacoEnvironment = { baseUrl: '${this.baseUrl}/min' };
                importScripts('${this.baseUrl}/min/vs/base/worker/workerMain.js');
            `],{type:"text/javascript"}));C.MonacoEnvironment={baseUrl:this.baseUrl+"/min",getWorkerUrl:()=>t,globalAPI:!0}}}activateContributions(){return d(this,null,function*(){yield Promise.all(this.contributions.map(t=>t.activate()))})}deactivateContributions(){return d(this,null,function*(){yield Promise.all(this.contributions.map(t=>t.deactivate?t.deactivate():Promise.resolve()))})}};i.\u0275fac=function(e){return new(e||i)(m(h,8),m(A,8),m(ot))},i.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var ct=["container"],wt=(()=>{let i=class i{constructor(t,e){this.loader=t,this.config=e,this.ready=new x,this.autoLayout=!0,this.width=0,this.height=0}onResizeWindow(){var t;(t=this.editor)==null||t.layout()}ngAfterViewInit(){this.loader.loadAsync().then(()=>{this.createEditor()})}ngAfterViewChecked(){var o;if(!this.autoLayout)return;let{offsetWidth:t,offsetHeight:e}=this.container.nativeElement;(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,(o=this.editor)==null||o.layout())}ngOnDestroy(){var t;(t=this.editor)==null||t.dispose()}createEditor(){this.editor=monaco.editor.createDiffEditor(this.container.nativeElement,I(I({},this.config.options||{}),this.options||{})),this.ready.emit(this.editor)}};i.\u0275fac=function(e){return new(e||i)(u(g),u(h,8))},i.\u0275cmp=p({type:i,selectors:[["nge-monaco-diff-editor"]],viewQuery:function(e,o){if(e&1&&O(ct,7),e&2){let n;T(n=N())&&(o.container=n.first)}},hostBindings:function(e,o){e&1&&D("resize",function(){return o.onResizeWindow()},!1,S)},inputs:{autoLayout:"autoLayout",options:"options"},outputs:{ready:"ready"},decls:2,vars:0,consts:[["container",""],[1,"nge-monaco-diff-editor-container"]],template:function(e,o){e&1&&_(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:var(--editor-height, 100%);border:1px solid #F5F5F5;box-sizing:border-box}.nge-monaco-diff-editor-container[_ngcontent-%COMP%]{width:100%;height:100%}"]});let r=i;return r})();var y=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=p({type:i,selectors:[["nge-monaco-placeholder"]],decls:0,vars:0,template:function(e,o){},styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}"],changeDetection:0});let r=i;return r})();var dt=["container"];function lt(r,i){r&1&&_(0,"nge-monaco-placeholder")}var Qt=(()=>{let i=class i{constructor(t,e){this.loader=t,this.config=e,this.loading=!0,this.ready=new x,this.autoLayout=!0,this.width=0,this.height=0}ngAfterViewInit(){this.loader.loadAsync().then(()=>{this.createEditor()})}ngAfterViewChecked(){var o;if(!this.autoLayout)return;let{offsetWidth:t,offsetHeight:e}=this.container.nativeElement;(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,(o=this.editor)==null||o.layout())}ngOnDestroy(){var t;(t=this.editor)==null||t.dispose()}onResizeWindow(){var t;(t=this.editor)==null||t.layout()}createEditor(){this.editor=monaco.editor.create(this.container.nativeElement,I(I({},this.config.options||{}),this.options||{})),this.loading=!1,this.ready.emit(this.editor)}};i.\u0275fac=function(e){return new(e||i)(u(g),u(h,8))},i.\u0275cmp=p({type:i,selectors:[["nge-monaco-editor"]],viewQuery:function(e,o){if(e&1&&O(dt,7),e&2){let n;T(n=N())&&(o.container=n.first)}},hostBindings:function(e,o){e&1&&D("resize",function(){return o.onResizeWindow()},!1,S)},inputs:{autoLayout:"autoLayout",options:"options"},outputs:{ready:"ready"},decls:3,vars:1,consts:[["container",""],[4,"ngIf"],[1,"nge-monaco-editor-container"]],template:function(e,o){e&1&&(v(0,lt,1,0,"nge-monaco-placeholder",1),_(1,"div",2,0)),e&2&&b("ngIf",o.loading)},dependencies:[M,y],styles:["[_nghost-%COMP%]{display:block;height:var(--editor-height, 100%);border:1px solid #f5f5f5;box-sizing:border-box}.nge-monaco-editor-container[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0});let r=i;return r})();var w=(()=>{let i=class i{constructor(t,e){this.http=t,this.config=e,this.themes=new j([]),this.activeTheme=new j(void 0)}get theme(){return this.activeTheme.value}get themeChanges(){return this.activeTheme.asObservable()}get themesChanges(){return this.themes.asObservable().pipe(Q(t=>t.slice()))}activate(){return d(this,null,function*(){var o,n;this.decorateCreateEditorAPI();let t=document.createElement("div"),e=monaco.editor.create(t);this.themeService=e._themeService,setTimeout(()=>e.dispose()),this.retrieveThemes(),yield this.setTheme(((n=(o=this.config)==null?void 0:o.theming)==null?void 0:n.default)||"vs"),t.remove()})}setTheme(t){return d(this,null,function*(){yield this.defineTheme(t),monaco.editor.setTheme(t),this.activeTheme.next(this.themeService.getColorTheme())})}getTheme(t){return d(this,null,function*(){return yield this.defineTheme(t),this.themeService._knownThemes.get(t)})}defineTheme(t){return d(this,null,function*(){var n,s,a;if(!t)throw new ReferenceError('Argument "themeName" is required');if(this.themeService._knownThemes.has(t))return;let o=(a=(s=(n=this.config)==null?void 0:n.theming)==null?void 0:s.themes)==null?void 0:a.find(c=>this.themeNameFromPath(c)===t);if(!o)throw new Error(`[nge-monaco] Missing theme "${t}"`);if(!this.http)throw new Error("[nge-monaco] Missing HttpClientModule in AppModule. See README for more information");try{let c=yield K(this.http.get(o));monaco.editor.defineTheme(t,{base:c.base,inherit:c.inherit,rules:c.rules,colors:c.colors})}catch(c){console.error("[nge-monaco] Failed to load theme "+o,c)}})}retrieveThemes(){var o,n;let t=[];this.themeService._knownThemes.forEach(s=>{t.push(s.themeName)});let e=(((n=(o=this.config)==null?void 0:o.theming)==null?void 0:n.themes)||[]).map(this.themeNameFromPath.bind(this));this.themes.next(t.concat(e))}themeNameFromPath(t){let e=t.split("/").pop();if(!e)throw new Error(`[nge-monaco]: invalid theme path "${t}"`);return e.replace(".json","")}decorateCreateEditorAPI(){let t=monaco.editor.create;monaco.editor.create=(e,o,n)=>{let s=t.call(monaco.editor,e,o,n),a=s.updateOptions;return s.updateOptions=c=>{a.call(s,c),c.theme&&this.setTheme(c.theme).catch(console.error)},o!=null&&o.theme&&this.setTheme(o.theme).catch(console.error),s}}};i.\u0275fac=function(e){return new(e||i)(m(et,8),m(h,8))},i.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})(),te=["active4d.json","all-hallows-eve.json","amy.json","birds-of-paradise.json","blackboard.json","brilliance-black.json","brilliance-dull.json","chrome-devtools.json","clouds-midnight.json","clouds.json","cobalt.json","dawn.json","dreamweaver.json","eiffel.json","espresso-libre.json","github.json","idle-fingers.json","idle.json","iplastic.json","katzenmilch.json","kuroir-theme.json","kr-theme.json","lazy.json","magicwb-amiga.json","merbivore-soft.json","merbivore.json","monokai-bright.json","monokai.json","monoindustrial.json","night-owl.json","nord.json","oceanic-next.json","one-dark-pro.json","pastels-on-dark.json","slush-and-poppies.json","solarized-dark.json","solarized-light.json","space-cadet.json","sunburst.json","textmate.json","tomorrow-night-blue.json","tomorrow-night-bright.json","tomorrow-night-eighties.json","tomorrow-night.json","tomorrow.json","twilight.json","upstream-sunburst.json","vibrant-ink.json","xcode.json","zenburnesque.json"];var rt=(()=>{let i=class i{constructor(t,e){this.loader=t,this.theming=e}colorizeElement(t){return d(this,null,function*(){var a,c;yield this.loader.loadAsync(),t.theme&&(yield this.theming.defineTheme(t.theme));let{element:e}=t;e.innerHTML=this.escapeHtml(t.code||""),e.style.padding="4px",e.style.display="block";let o=e.parentElement;(o==null?void 0:o.tagName)==="PRE"&&(o.classList.contains("monaco-editor")||o.classList.add("monaco-editor"),o.classList.contains("monaco-editor-background")||o.classList.add("monaco-editor-background")),e.className="";let s=(a=monaco.languages.getLanguages().find(l=>{var G;return l.id===t.language||((G=l.aliases)==null?void 0:G.find(st=>st===t.language))}))==null?void 0:a.id;yield monaco.editor.colorizeElement(e,{mimeType:s||"plaintext",theme:t.theme||((c=this.theming.theme)==null?void 0:c.themeName)||"vs"}),this.highlightLines(t),this.showLineNumbers(t)})}escapeHtml(t){let e={"<":"&lt;",">":"&gt;"};return t.replace(/[<>]/g,o=>e[o]||o)}highlightLines(t){if(!t.highlights)return;let{element:e}=t,o=this.lineNumbersFromString(t.highlights.toString()),n=!0,s=1;e.childNodes.forEach(a=>{let c=a;if(n){let l=document.createElement("div");l.style.height="18px",o.includes(s)&&(l.classList.add("rangeHighlight"),l.classList.add("selected-text")),e.insertBefore(l,c),e.removeChild(c),l.appendChild(c),n=!1}else c.tagName==="BR"&&(s++,n=!0)}),Array.from(e.getElementsByTagName("br")).forEach(a=>a.remove())}showLineNumbers(t){if(!t.lines)return;let{element:e}=t,o=this.lineNumbersFromString(t.lines.toString()),n=(t.code||"").split(`
`).length;if(o.length===1)for(let a=o[0]+1;a<=n;a++)o.push(a);let s=['<div style="padding:0  12px; text-align: right;">'];for(let a=0;a<n;a++){let c="";o.includes(a+1)&&(c=""+(a+1)),s.push(`<div class="line-numbers" style="height: 18px">${c}</div>`)}s.push("</div>"),e.style.display="flex",e.innerHTML=`
            ${s.join("")}
            <div style="flex: 1;">${e.innerHTML}</div>
        `}lineNumbersFromString(t){let e=(t||"").trim().split(" "),o=[];for(let n of e)if(n.includes("-")){let s=n.split("-"),a=Number.parseInt(s[0],10),c=Number.parseInt(s[1],10);if(a&&c)for(let l=a;l<=c;l++)o.includes(l)||o.push(l)}else{let s=Number.parseInt(n,10);s&&o.push(s)}return o}};i.\u0275fac=function(e){return new(e||i)(m(g),m(w))},i.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var ht=["container"],pt=["transclusion"],_t=["*"];function Ot(r,i){r&1&&_(0,"nge-monaco-placeholder")}var le=(()=>{let i=class i{constructor(){this.colorizer=P(rt),this.changeDetectorRef=P(J),this.subscriptions=[],this.loading=!0}ngOnChanges(){var e;let t=((e=this.transclusion.nativeElement.textContent)==null?void 0:e.trim())||this.code||"";this.colorize(t)}ngOnDestroy(){var t,e;(t=this.editor)==null||t.dispose(),(e=this.observer)==null||e.disconnect(),this.subscriptions.forEach(o=>o.unsubscribe())}colorize(t){return d(this,null,function*(){try{yield this.colorizer.colorizeElement({code:t||"",theme:this.theme,lines:this.lines,language:this.language,highlights:this.highlights,element:this.container.nativeElement})}finally{this.loading=!1,this.changeDetectorRef.markForCheck()}})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=p({type:i,selectors:[["nge-monaco-viewer"]],viewQuery:function(e,o){if(e&1&&(O(ht,7),O(pt,7)),e&2){let n;T(n=N())&&(o.container=n.first),T(n=N())&&(o.transclusion=n.first)}},inputs:{code:"code",lines:"lines",theme:"theme",language:"language",highlights:"highlights"},features:[$],ngContentSelectors:_t,decls:9,vars:1,consts:[["container",""],["transclusion",""],[4,"ngIf"],[1,"monaco-editor","monaco-editor-background"],[2,"display","none"]],template:function(e,o){e&1&&(Y(),v(0,Ot,1,0,"nge-monaco-placeholder",2),H(1,"pre",3),B(2,"  "),_(3,"code",null,0),B(5,`
`),U(),H(6,"div",4,1),Z(8),U()),e&2&&b("ngIf",o.loading)},dependencies:[M,y],styles:["pre[_ngcontent-%COMP%]{margin:.5em 0;overflow:auto;border:1px solid #f2f2f2}nge-monaco-placeholder[_ngcontent-%COMP%]{max-height:200px}"],changeDetection:0});let r=i;return r})();var F=class{activate(){this.disposable=monaco.editor.onDidCreateEditor(i=>{this.preventSymbolDuplicationOnCompositionEnd(i)})}deactivate(){var i;(i=this.disposable)==null||i.dispose()}preventSymbolDuplicationOnCompositionEnd(i){let R=[],t=[];t.push(i.onDidCompositionStart(()=>{let e=i.getPosition();e&&R.push(e)})),t.push(i.onDidCompositionEnd(()=>{setTimeout(()=>{var s;if(!R.length)return;let e=R[0],o=i.getPosition();if(!o)return;R.splice(0,1);let n=o.column-e.column;if(n>1){(s=document.activeElement)==null||s.blur(),i.focus();let a=new monaco.Range(o.lineNumber,o.column-(n-1),o.lineNumber,o.column);i.executeEdits("api",[{range:a,text:"",forceMoveMarkers:!1}])}})})),t.push(i.onDidDispose(()=>{t.forEach(e=>e.dispose()),t=[]}))}};var xe=(()=>{let i=class i{static forRoot(t){return{ngModule:i,providers:[{provide:h,useValue:t},{provide:A,multi:!0,useExisting:w},{provide:A,multi:!0,useClass:F}]}}};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=X({type:i}),i.\u0275inj=q({imports:[tt]});let r=i;return r})();export{wt as a,Qt as b,w as c,te as d,rt as e,le as f,xe as g};
